# Embed: Hand Gesture Controlled Smart Bulb & Fall Detection System

라즈베리파이 4를 활용해 손동작으로 Tapo L530 전구를 제어하는 프로토타입을 개발했으며, 추후 머신러닝 기반 손동작 인식과 원격 CCTV 낙상 감지 시스템으로 확장 중인 임베디드 시스템 프로젝트입니다.

---

## 프로젝트 개요
1. **현재 기능**: Rule-Based 방식으로 손동작을 인식해 Tapo L530 전구를 무선 제어 (켜기/끄기, 색상 변경).
2. **확장 계획**: 
   - 머신러닝으로 손동작 인식 모델 개선.
   - 원격 CCTV로 사람의 스켈레톤을 추적해 낙상 감지 후 긴급 메시지 전송.

---

## 기술적 접근

### 1️⃣ Rule-Based 방식 (현재 프로토타입)
- **설명**: MediaPipe로 손 랜드마크를 추출하고, 손가락 각도 및 위치를 직접 계산해 제스처 패턴(예: Thumb Up, V Sign)을 인식.
- **장점**: 가볍고 빠르며, 라즈베리파이에서 실시간 실행 가능.
- **단점**: 새로운 제스처 추가 시 규칙을 수작업으로 정의해야 함.

### 2️⃣ 머신러닝/딥러닝 방식 (예정)
- **설명**: 데이터셋(손동작 영상)을 수집해 PyTorch/TensorFlow Lite로 모델을 학습시켜 AI가 제스처 패턴을 자동 분류.
- **장점**: 새로운 손동작 추가가 쉬우며, 복잡한 패턴 인식 가능.
- **단점**: 데이터 수집 및 모델 학습에 시간과 리소스 필요.

### 3️⃣ 원격 CCTV 및 낙상 감지 (신규 확장)
- **설명**: OpenCV와 MediaPipe Pose를 활용해 사람의 스켈레톤을 실시간 추적. 어깨선(Y축)이 급격히 내려가거나 특정 임계값 이하로 떨어지면 낙상으로 판단.
- **기능**: 낙상 감지 시 사진 캡처 후 지역 관리자의 전화번호로 긴급 메시지(SMS/이메일) 전송.
- **장점**: 비접촉 모니터링으로 노약자 안전 강화.
- **도전 과제**: 실시간 스켈레톤 추적의 정확도, 네트워크 지연 최소화.

---

## 확장성
우리 프로젝트의 강점은 **확장성**! 스마트 기기의 API만 확보하면 라즈베리파이에서 다양한 디바이스를 제어할 수 있습니다.

1. **모델 확장**
   - 현재 Rule-Based에서 머신러닝 기반 손동작 인식으로 전환.
   - 스켈레톤 인식 모델 추가로 낙상 감지 및 동작 분석 가능.
2. **앱 서비스 개발**
   - 손동작 로그 관리, 사용자 패턴 분석, 낙상 기록 저장.
   - 모바일 앱으로 원격 모니터링 및 알림 기능 제공.
3. **맞춤형 서비스**
   - 사용자별 손동작/스켈레톤 패턴 학습으로 개인화.
   - 손동작 인식이 어려운 경우 표정 인식 등 대체 인터페이스 도입.

---

## 스토리텔링

### 1️⃣ 편리성: 인간의 귀차니즘 해결
- **아이디어**: 자려고 누웠을 때 손동작 하나로 전구를 끄거나 켜는 편리함.
- **한계**: 음성 인식 앱과의 차별성이 약함.

### 2️⃣ 실용성: 요리 중 비접촉 제어
- **아이디어**: 손에 양념이 묻은 상태에서도 손동작으로 조명 제어 가능.
- **장점**: 위생적이고 실생활에서 유용.

### 3️⃣ 사회적 기여: 노약자 및 환자 지원
- **아이디어**: 손동작으로 조명 제어 + 낙상 감지로 몸이 불편한 사람들의 안전과 편의를 지원.
- **가치**: 비접촉 인터페이스와 긴급 상황 대응으로 삶의 질 향상.
- **확장**: 손동작 인식이 어려운 경우 표정 인식 등으로 보완 가능.

---

## 하드웨어 및 정보
- **전구 모델**: Tapo L530
- **프로세서**: Raspberry Pi 4
- **카메라**: GD-C100 (USB 카메라)
- **IP 주소**: 192.168.1.41 (라즈베리파이)

---

## 소프트웨어 사용법
1. 라즈베리파이 전원 연결.
2. VNC 뷰어에서 `pi` 계정으로 연결 (IP: `192.168.1.41`, 비밀번호: `ki258436`).
3. 터미널에서 다음 명령어 실행:
   ```bash
   cd /mediapipe
   source mediapipe_env/bin/activate
   python tapo_hand.py
   ```
4. 프로그램 실행 후 손동작으로 전구 제어.
5. 종료하려면 `q` 키 입력.

---

## 향후 계획
1. **머신러닝 모델 개발**
   - 손동작 데이터 수집 및 경량화된 모델(TensorFlow Lite)로 전환.
2. **낙상 감지 구현**
   - MediaPipe Pose로 스켈레톤 추적, 낙상 판단 로직 추가.
   - Twilio API 또는 SMTP로 긴급 메시지 전송.
3. **통합 테스트**
   - 손동작 제어와 낙상 감지를 동시에 실행하며 성능 최적화.

---

## 기여 방법
- **코드 개선**: `tapo_hand.py`에 낙상 감지 모듈 추가.
- **데이터 수집**: 다양한 손동작/낙상 시나리오 영상 제공.
- **피드백**: 사용성 및 기능 확장 아이디어 제안.

---

## 스토리 텔링
출처 : 질병관리청
미국에서는 65세 이상 노인 중 1/3 이상이 1년에 최소 한 번은 낙상을 경험한다고 합니다. 우리나라의 경우 2020년 노인실태조사에 따르면 65세 이상 노인중 7.2%가 지난 1년 동안 낙상을 경험했으며, 낙상횟수는 평균 1.6회로 나타났고 나이가 많을수록 낙상률이 높았습니다(65~69세 4.5%, 85세 이상 13.6%). 흥미로운 사실은 2017년 노인실태조사에서는 1년간 낙상 경험 노인이 15.9%였고, 낙상횟수는 평균 2.1회인 것을 보면 3년 사이에 노인에서의 낙상 횟수가 줄어든 긍정적 신호로 볼 수도 있으나, 2020년 2월부터 코로나바이러스감염증-19 대응단계를 최고 단계인 ‘심각’으로 상향하면서 일상생활에서 사회적 거리두기를 조치함으로써 노인들의 사회적 활동이 감소된 것이 영향을 주었을 것으로 보입니다. 

손상 때문에 입원한 환자 중 80%는 65세 이상 노인입니다. 노인의 경우 평균재원일수도 높아서 전체 손상환자의 평균재원일수가 2018년 기준 13일인데 비해 노인은 16일간 입원하는 것으로 조사되었습니다. 특히 70세 이상이 되면 추락이나 미끄러짐으로 인해 입원하는 환자 수가 급격히 증가합니다. 노인에서 가장 흔한 손상 원인은 추락이나 낙상(60.9%)인데, 이는 교통사고(19.1%)보다 3배나 높습니다. 노인들은 낙상으로 인해 사망하는 경우가 많습니다. 미국인의 사망원인을 분석한 미국 질병관리예방본부(Centers for Disease Control and Prevention, CDC)의 보고에 따르면, 낙상은 65세 이상의 노인에서 손상으로 인한 사망의 가장 큰 원인입니다. 낙상으로 인한 사망률(나이 고려)은 2012년에는 10만명당 55.3건에서 2021년에는 78.0건으로 무려 41%가 늘었습니다. 전 세계적으로 고령의 노인 비율이 높아지면서 노인의 낙상 위험성이 더욱 증가하는 추세입니다. 이처럼 낙상은 노년 생활의 가장 큰 위험요소 중 하나이며, 노인 비율이 빠르게 증가하는 우리나라에서는 앞으로 더욱 증가할 것으로 예상됩니다.
